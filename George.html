<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ForexArbitrage Pro - Quantum Trading Platform</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: #0a0e27;
            color: #e2e8f0;
        }
        
        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }
        
        .glass-panel {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(59, 130, 246, 0.2);
        }
        
        .neon-glow {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .pulse-ring {
            animation: pulse-ring 2s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
        }
        
        @keyframes pulse-ring {
            0% { transform: scale(0.8); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }
        
        .price-ticker {
            animation: ticker 30s linear infinite;
        }
        
        @keyframes ticker {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
        }
        
        .order-book-row {
            transition: all 0.3s ease;
        }
        
        .order-book-row:hover {
            background: rgba(59, 130, 246, 0.1);
        }
        
        .arbitrage-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        
        .arbitrage-card:hover {
            transform: translateX(5px);
            border-left-color: #10b981;
        }
        
        .tab-active {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
        }
        
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .live-indicator::before {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;
        
        // Custom hook for real-time data simulation
        const useRealTimeData = (initialData, updateInterval = 2000) => {
            const [data, setData] = useState(initialData);
            
            useEffect(() => {
                const interval = setInterval(() => {
                    setData(prev => prev.map(item => ({
                        ...item,
                        price: item.price + (Math.random() - 0.5) * 0.001,
                        change: (Math.random() - 0.5) * 0.5,
                        high: Math.max(item.high, item.price + Math.random() * 0.002),
                        low: Math.min(item.low, item.price - Math.random() * 0.002)
                    })));
                }, updateInterval);
                
                return () => clearInterval(interval);
            }, [updateInterval]);
            
            return [data, setData];
        };
        
        // Chart Component
        const TradingChart = ({ pair, data }) => {
            const canvasRef = useRef(null);
            const chartRef = useRef(null);
            
            useEffect(() => {
                if (!canvasRef.current) return;
                
                const ctx = canvasRef.current.getContext('2d');
                
                // Generate mock historical data
                const generateData = () => {
                    const points = 50;
                    const labels = [];
                    const prices = [];
                    let price = data || 1.1258;
                    
                    for (let i = 0; i < points; i++) {
                        labels.push(new Date(Date.now() - (points - i) * 60000).toLocaleTimeString());
                        price = price + (Math.random() - 0.5) * 0.002;
                        prices.push(price);
                    }
                    return { labels, prices };
                };
                
                const { labels, prices } = generateData();
                
                chartRef.current = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: pair,
                            data: prices,
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 0,
                            pointHoverRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                backgroundColor: 'rgba(15, 23, 42, 0.9)',
                                titleColor: '#94a3b8',
                                bodyColor: '#e2e8f0',
                                borderColor: 'rgba(59, 130, 246, 0.3)',
                                borderWidth: 1
                            }
                        },
                        scales: {
                            x: {
                                grid: { color: 'rgba(59, 130, 246, 0.1)' },
                                ticks: { color: '#64748b', maxTicksLimit: 6 }
                            },
                            y: {
                                grid: { color: 'rgba(59, 130, 246, 0.1)' },
                                ticks: { 
                                    color: '#64748b',
                                    callback: function(value) {
                                        return value.toFixed(4);
                                    }
                                }
                            }
                        },
                        interaction: {
                            mode: 'nearest',
                            axis: 'x',
                            intersect: false
                        }
                    }
                });
                
                // Real-time updates
                const updateInterval = setInterval(() => {
                    if (chartRef.current) {
                        const newPrice = prices[prices.length - 1] + (Math.random() - 0.5) * 0.001;
                        const newLabel = new Date().toLocaleTimeString();
                        
                        chartRef.current.data.labels.push(newLabel);
                        chartRef.current.data.datasets[0].data.push(newPrice);
                        
                        if (chartRef.current.data.labels.length > 50) {
                            chartRef.current.data.labels.shift();
                            chartRef.current.data.datasets[0].data.shift();
                        }
                        
                        chartRef.current.update('none');
                    }
                }, 2000);
                
                return () => {
                    clearInterval(updateInterval);
                    if (chartRef.current) {
                        chartRef.current.destroy();
                    }
                };
            }, [pair, data]);
            
            return (
                <div className="chart-container">
                    <canvas ref={canvasRef}></canvas>
                </div>
            );
        };
        
        // Header Component
        const Header = ({ activeTab, setActiveTab, user, onLogout }) => {
            const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
            
            const tabs = [
                { id: 'markets', label: 'Markets', icon: 'TrendingUp' },
                { id: 'arbitrage', label: 'Arbitrage', icon: 'Zap' },
                { id: 'trading', label: 'Trading', icon: 'BarChart3' },
                { id: 'account', label: 'Account', icon: 'Wallet' }
            ];
            
            return (
                <header className="sticky top-0 z-50 glass-panel border-b border-blue-500/20">
                    <div className="container mx-auto px-4 py-4">
                        <div className="flex justify-between items-center">
                            <div className="flex items-center space-x-3">
                                <div className="relative">
                                    <div className="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-lg neon-glow">
                                        <span className="text-white font-bold text-xl">F</span>
                                    </div>
                                    <div className="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full pulse-ring"></div>
                                </div>
                                <div>
                                    <h1 className="text-2xl font-bold gradient-text">ForexArbitrage Pro</h1>
                                    <p className="text-xs text-blue-400/70 font-mono">QUANTUM EDITION v2.0</p>
                                </div>
                            </div>
                            
                            <nav className="hidden md:flex space-x-2">
                                {tabs.map(tab => (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        className={`px-4 py-2 rounded-lg transition-all duration-300 flex items-center space-x-2 ${
                                            activeTab === tab.id 
                                                ? 'tab-active shadow-lg shadow-blue-500/25' 
                                                : 'hover:bg-blue-500/10 text-gray-400 hover:text-white'
                                        }`}
                                    >
                                        <span>{tab.label}</span>
                                    </button>
                                ))}
                            </nav>
                            
                            <div className="hidden md:flex items-center space-x-4">
                                {user ? (
                                    <div className="flex items-center space-x-3">
                                        <div className="text-right">
                                            <p className="text-sm font-semibold text-white">{user.name}</p>
                                            <p className="text-xs text-green-400 font-mono">${user.balance.toLocaleString()}</p>
                                        </div>
                                        <button 
                                            onClick={onLogout}
                                            className="p-2 hover:bg-red-500/20 rounded-lg transition-colors text-red-400"
                                        >
                                            <i data-lucide="log-out" className="w-5 h-5"></i>
                                        </button>
                                    </div>
                                ) : (
                                    <>
                                        <button className="px-4 py-2 text-sm font-medium text-gray-300 hover:text-white transition-colors">
                                            Login
                                        </button>
                                        <button className="px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg font-medium hover:shadow-lg hover:shadow-blue-500/25 transition-all transform hover:scale-105">
                                            Get Started
                                        </button>
                                    </>
                                )}
                            </div>
                            
                            <button 
                                className="md:hidden p-2"
                                onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}
                            >
                                <i data-lucide={isMobileMenuOpen ? "x" : "menu"} className="w-6 h-6"></i>
                            </button>
                        </div>
                        
                        {isMobileMenuOpen && (
                            <div className="md:hidden mt-4 pb-4 border-t border-blue-500/20 pt-4">
                                <div className="grid grid-cols-2 gap-2">
                                    {tabs.map(tab => (
                                        <button
                                            key={tab.id}
                                            onClick={() => {
                                                setActiveTab(tab.id);
                                                setIsMobileMenuOpen(false);
                                            }}
                                            className={`p-3 rounded-lg text-sm font-medium ${
                                                activeTab === tab.id 
                                                    ? 'bg-blue-600 text-white' 
                                                    : 'bg-blue-500/10 text-gray-400'
                                            }`}
                                        >
                                            {tab.label}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        )}
                    </div>
                    
                    {/* Live Price Ticker */}
                    <div className="bg-blue-950/30 border-y border-blue-500/10 overflow-hidden">
                        <div className="flex price-ticker whitespace-nowrap py-2">
                            {[...Array(2)].map((_, i) => (
                                <div key={i} className="flex space-x-8 mr-8">
                                    {['EUR/USD 1.1258 +0.12%', 'GBP/USD 1.3445 -0.25%', 'USD/JPY 110.42 +0.34%', 'AUD/USD 0.7623 +0.18%', 'USD/CAD 1.2567 -0.15%', 'XAU/USD 2034.50 +0.45%'].map((item, idx) => (
                                        <span key={idx} className="text-sm font-mono text-gray-400">
                                            <span className="text-blue-400 font-semibold">{item.split(' ')[0]}</span> {item.split(' ')[1]} {' '}
                                            <span className={item.includes('+') ? 'text-green-400' : 'text-red-400'}>
                                                {item.split(' ')[2]}
                                            </span>
                                        </span>
                                    ))}
                                </div>
                            ))}
                        </div>
                    </div>
                </header>
            );
        };
        
        // Markets View
        const MarketsView = ({ marketData }) => {
            return (
                <div className="space-y-6 animate-fade-in">
                    <div className="flex justify-between items-center">
                        <div>
                            <h2 className="text-3xl font-bold text-white mb-1">Market Overview</h2>
                            <p className="text-gray-400">Real-time forex market data and analytics</p>
                        </div>
                        <div className="flex items-center space-x-2 bg-green-500/10 px-4 py-2 rounded-full border border-green-500/20">
                            <div className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                            <span className="text-green-400 text-sm font-medium">Market Open</span>
                        </div>
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {marketData.map((item, index) => (
                            <div key={item.pair} 
                                className="glass-panel rounded-xl p-6 hover:border-blue-500/40 transition-all duration-300 hover:transform hover:scale-105 group cursor-pointer"
                                style={{animationDelay: `${index * 100}ms`}}
                            >
                                <div className="flex justify-between items-start mb-4">
                                    <div>
                                        <h3 className="font-bold text-xl text-white group-hover:text-blue-400 transition-colors">{item.pair}</h3>
                                        <p className="text-xs text-gray-500 mt-1">Forex Major</p>
                                    </div>
                                    <span className={`px-3 py-1 rounded-full text-xs font-bold ${
                                        item.change >= 0 
                                            ? 'bg-green-500/20 text-green-400 border border-green-500/30' 
                                            : 'bg-red-500/20 text-red-400 border border-red-500/30'
                                    }`}>
                                        {item.change >= 0 ? '↗' : '↘'} {Math.abs(item.change).toFixed(2)}%
                                    </span>
                                </div>
                                
                                <div className="text-3xl font-bold font-mono text-white mb-4 tracking-tight">
                                    {item.price.toFixed(4)}
                                </div>
                                
                                <div className="grid grid-cols-2 gap-4 text-sm">
                                    <div className="bg-blue-500/5 rounded-lg p-2">
                                        <p className="text-gray-500 text-xs mb-1">High</p>
                                        <p className="font-mono text-blue-300">{item.high.toFixed(4)}</p>
                                    </div>
                                    <div className="bg-blue-500/5 rounded-lg p-2">
                                        <p className="text-gray-500 text-xs mb-1">Low</p>
                                        <p className="font-mono text-purple-300">{item.low.toFixed(4)}</p>
                                    </div>
                                </div>
                                
                                <div className="mt-4 pt-4 border-t border-blue-500/10 flex justify-between items-center">
                                    <span className="text-xs text-gray-500">Vol: {(Math.random() * 1000 + 500).toFixed(0)}M</span>
                                    <button className="text-xs text-blue-400 hover:text-blue-300 font-medium">Trade →</button>
                                </div>
                            </div>
                        ))}
                    </div>
                    
                    {/* Market Stats */}
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mt-8">
                        {[
                            { label: '24h Volume', value: '$48.2B', change: '+12.5%' },
                            { label: 'Active Traders', value: '12,847', change: '+5.2%' },
                            { label: 'Arbitrage Ops', value: '23', change: '+8' },
                            { label: 'Avg Spread', value: '0.12 pips', change: '-2.1%' }
                        ].map((stat, idx) => (
                            <div key={idx} className="glass-panel rounded-lg p-4 text-center">
                                <p className="text-gray-400 text-sm mb-1">{stat.label}</p>
                                <p className="text-2xl font-bold text-white font-mono">{stat.value}</p>
                                <p className={`text-xs mt-1 ${stat.change.includes('+') ? 'text-green-400' : 'text-red-400'}`}>
                                    {stat.change} today
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };
        
        // Arbitrage View
        const ArbitrageView = ({ opportunities, setOpportunities }) => {
            const [selectedOpportunity, setSelectedOpportunity] = useState(null);
            const [executionProgress, setExecutionProgress] = useState(0);
            const [isExecuting, setIsExecuting] = useState(false);
            
            const executeArbitrage = (opp) => {
                setSelectedOpportunity(opp);
                setIsExecuting(true);
                setExecutionProgress(0);
                
                const interval = setInterval(() => {
                    setExecutionProgress(prev => {
                        if (prev >= 100) {
                            clearInterval(interval);
                            setTimeout(() => {
                                setIsExecuting(false);
                                setExecutionProgress(0);
                                // Remove executed opportunity
                                setOpportunities(prev => prev.filter(o => o.id !== opp.id));
                            }, 500);
                            return 100;
                        }
                        return prev + 10;
                    });
                }, 100);
            };
            
            return (
                <div className="space-y-6 animate-fade-in">
                    <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                        <div>
                            <h2 className="text-3xl font-bold text-white mb-1">Quantum Arbitrage</h2>
                            <p className="text-gray-400">AI-powered cross-broker opportunity detection</p>
                        </div>
                        <div className="flex items-center space-x-4">
                            <div className="glass-panel px-4 py-2 rounded-lg flex items-center space-x-2">
                                <div className="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></div>
                                <span className="text-sm text-gray-300">Scanning 50+ brokers</span>
                            </div>
                            <div className="text-right">
                                <p className="text-xs text-gray-500">Last Update</p>
                                <p className="text-sm font-mono text-blue-400">{new Date().toLocaleTimeString()}</p>
                            </div>
                        </div>
                    </div>
                    
                    {/* Opportunities List */}
                    <div className="space-y-4">
                        {opportunities.map((opp) => (
                            <div key={opp.id} className="arbitrage-card glass-panel rounded-xl p-6 relative overflow-hidden">
                                <div className="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-green-500/10 to-transparent rounded-bl-full"></div>
                                
                                <div className="grid grid-cols-1 md:grid-cols-5 gap-6 items-center relative z-10">
                                    <div className="md:col-span-1">
                                        <h3 className="text-2xl font-bold text-white mb-1">{opp.pair}</h3>
                                        <div className="flex items-center space-x-2">
                                            <span className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                                            <span className="text-xs text-green-400 font-medium">Live Opportunity</span>
                                        </div>
                                    </div>
                                    
                                    <div className="md:col-span-2 grid grid-cols-2 gap-4">
                                        <div className="bg-red-500/10 border border-red-500/20 rounded-lg p-3">
                                            <p className="text-xs text-red-400 mb-1">{opp.brokerA}</p>
                                            <p className="text-lg font-mono font-bold text-white">{opp.priceA.toFixed(5)}</p>
                                            <p className="text-xs text-gray-500 mt-1">Ask Price</p>
                                        </div>
                                        <div className="bg-green-500/10 border border-green-500/20 rounded-lg p-3">
                                            <p className="text-xs text-green-400 mb-1">{opp.brokerB}</p>
                                            <p className="text-lg font-mono font-bold text-white">{opp.priceB.toFixed(5)}</p>
                                            <p className="text-xs text-gray-500 mt-1">Bid Price</p>
                                        </div>
                                    </div>
                                    
                                    <div className="md:col-span-1 text-center">
                                        <div className="inline-block bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/30 rounded-xl p-4">
                                            <p className="text-3xl font-bold text-green-400 font-mono">{opp.spread.toFixed(4)}</p>
                                            <p className="text-sm text-green-300/70 mt-1">{opp.percentage.toFixed(3)}% profit</p>
                                        </div>
                                    </div>
                                    
                                    <div className="md:col-span-1">
                                        <button 
                                            onClick={() => executeArbitrage(opp)}
                                            disabled={isExecuting && selectedOpportunity?.id === opp.id}
                                            className="w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-4 rounded-xl transition-all transform hover:scale-105 shadow-lg shadow-green-500/25 disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden"
                                        >
                                            {isExecuting && selectedOpportunity?.id === opp.id ? (
                                                <div className="flex items-center justify-center space-x-2">
                                                    <span>{executionProgress}%</span>
                                                </div>
                                            ) : (
                                                <span>Execute Trade</span>
                                            )}
                                            {isExecuting && selectedOpportunity?.id === opp.id && (
                                                <div 
                                                    className="absolute bottom-0 left-0 h-1 bg-white/50 transition-all duration-100"
                                                    style={{width: `${executionProgress}%`}}
                                                ></div>
                                            )}
                                        </button>
                                    </div>
                                </div>
                                
                                {/* Risk Metrics */}
                                <div className="mt-4 pt-4 border-t border-blue-500/10 flex flex-wrap gap-4 text-xs">
                                    <span className="text-gray-500">Risk Score: <span className="text-green-400 font-semibold">Low (2/10)</span></span>
                                    <span className="text-gray-500">Execution Time: <span className="text-blue-400 font-semibold">&lt;50ms</span></span>
                                    <span className="text-gray-500">Confidence: <span className="text-purple-400 font-semibold">98.5%</span></span>
                                    <span className="text-gray-500">Liquidity: <span className="text-yellow-400 font-semibold">High</span></span>
                                </div>
                            </div>
                        ))}
                    </div>
                    
                    {opportunities.length === 0 && (
                        <div className="glass-panel rounded-xl p-12 text-center">
                            <div className="w-20 h-20 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i data-lucide="search" className="w-10 h-10 text-blue-400"></i>
                            </div>
                            <h3 className="text-xl font-semibold text-white mb-2">No Active Opportunities</h3>
                            <p className="text-gray-400">Our AI is continuously scanning markets for arbitrage opportunities.</p>
                        </div>
                    )}
                    
                    {/* AI Engine Info */}
                    <div className="glass-panel rounded-xl p-6 border border-blue-500/20">
                        <div className="flex items-start space-x-4">
                            <div className="w-12 h-12 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center flex-shrink-0">
                                <i data-lucide="brain" className="w-6 h-6 text-white"></i>
                            </div>
                            <div className="flex-1">
                                <h3 className="text-lg font-semibold text-white mb-2">Neural Arbitrage Engine</h3>
                                <p className="text-gray-400 text-sm leading-relaxed mb-4">
                                    Our proprietary AI analyzes order books across 50+ tier-1 brokers simultaneously, 
                                    identifying microsecond-level price discrepancies with 99.7% accuracy.
                                </p>
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    {[
                                        { icon: 'zap', label: 'Latency', value: '<10ms' },
                                        { icon: 'shield', label: 'Success Rate', value: '99.7%' },
                                        { icon: 'globe', label: 'Markets', value: '150+' },
                                        { icon: 'cpu', label: 'Uptime', value: '99.99%' }
                                    ].map((item, idx) => (
                                        <div key={idx} className="bg-blue-500/5 rounded-lg p-3 text-center">
                                            <i data-lucide={item.icon} className="w-5 h-5 text-blue-400 mx-auto mb-2"></i>
                                            <p className="text-xs text-gray-500">{item.label}</p>
                                            <p className="text-sm font-bold text-white font-mono">{item.value}</p>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
        
        // Trading View
        const TradingView = ({ marketData, accountBalance, openPositions, setOpenPositions }) => {
            const [selectedPair, setSelectedPair] = useState('EUR/USD');
            const [orderType, setOrderType] = useState('market');
            const [amount, setAmount] = useState('');
            const [activeChart, setActiveChart] = useState('candlestick');
            
            const currentPrice = marketData.find(m => m.pair === selectedPair)?.price || 1.1258;
            
            const placeOrder = (side) => {
                if (!amount || parseFloat(amount) <= 0) return;
                
                const newPosition = {
                    pair: selectedPair,
                    amount: parseFloat(amount),
                    entry: currentPrice,
                    current: currentPrice,
                    side: side,
                    pnl: 0,
                    time: new Date().toLocaleTimeString()
                };
                
                setOpenPositions(prev => [newPosition, ...prev]);
                setAmount('');
            };
            
            return (
                <div className="space-y-6 animate-fade-in">
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        {/* Main Trading Area */}
                        <div className="lg:col-span-2 space-y-6">
                            {/* Chart Header */}
                            <div className="glass-panel rounded-xl p-4 flex flex-wrap justify-between items-center gap-4">
                                <div className="flex items-center space-x-4">
                                    <select 
                                        value={selectedPair}
                                        onChange={(e) => setSelectedPair(e.target.value)}
                                        className="bg-blue-950/50 border border-blue-500/30 rounded-lg px-4 py-2 text-white font-bold focus:outline-none focus:border-blue-500"
                                    >
                                        {marketData.map(m => (
                                            <option key={m.pair} value={m.pair}>{m.pair}</option>
                                        ))}
                                    </select>
                                    <div className="text-2xl font-mono font-bold text-white">
                                        {currentPrice.toFixed(5)}
                                        <span className="text-sm text-green-400 ml-2">+0.12%</span>
                                    </div>
                                </div>
                                
                                <div className="flex space-x-2">
                                    {['1m', '5m', '15m', '1H', '4H', '1D'].map(tf => (
                                        <button 
                                            key={tf}
                                            className={`px-3 py-1 rounded text-sm font-medium transition-colors ${
                                                tf === '1H' ? 'bg-blue-600 text-white' : 'text-gray-400 hover:text-white hover:bg-blue-500/20'
                                            }`}
                                        >
                                            {tf}
                                        </button>
                                    ))}
                                </div>
                            </div>
                            
                            {/* Chart */}
                            <div className="glass-panel rounded-xl p-4 h-[400px]">
                                <TradingChart pair={selectedPair} data={currentPrice} />
                            </div>
                            
                            {/* Order Entry */}
                            <div className="glass-panel rounded-xl p-6">
                                <div className="flex space-x-6 mb-6 border-b border-blue-500/20 pb-4">
                                    {['market', 'limit', 'stop'].map(type => (
                                        <button
                                            key={type}
                                            onClick={() => setOrderType(type)}
                                            className={`text-sm font-medium capitalize transition-colors ${
                                                orderType === type ? 'text-blue-400 border-b-2 border-blue-400 pb-4 -mb-4' : 'text-gray-500 hover:text-gray-300'
                                            }`}
                                        >
                                            {type} Order
                                        </button>
                                    ))}
                                </div>
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                    <div>
                                        <label className="block text-sm text-gray-400 mb-2">Amount (USD)</label>
                                        <div className="relative">
                                            <span className="absolute left-4 top-1/2 -translate-y-1/2 text-gray-500">$</span>
                                            <input 
                                                type="number"
                                                value={amount}
                                                onChange={(e) => setAmount(e.target.value)}
                                                className="w-full bg-blue-950/30 border border-blue-500/30 rounded-lg pl-8 pr-4 py-3 text-white font-mono focus:outline-none focus:border-blue-500 transition-colors"
                                                placeholder="0.00"
                                            />
                                        </div>
                                    </div>
                                    <div>
                                        <label className="block text-sm text-gray-400 mb-2">Leverage</label>
                                        <select className="w-full bg-blue-950/30 border border-blue-500/30 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500">
                                            <option>1:1 (No Leverage)</option>
                                            <option>1:10</option>
                                            <option>1:50</option>
                                            <option>1:100</option>
                                            <option>1:500</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div className="grid grid-cols-2 gap-4">
                                    <button 
                                        onClick={() => placeOrder('buy')}
                                        className="bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-4 rounded-xl transition-all transform hover:scale-[1.02] shadow-lg shadow-green-500/20"
                                    >
                                        <div className="flex flex-col items-center">
                                            <span className="text-lg">BUY</span>
                                            <span className="text-xs opacity-80 font-mono">{currentPrice.toFixed(5)}</span>
                                        </div>
                                    </button>
                                    <button 
                                        onClick={() => placeOrder('sell')}
                                        className="bg-gradient-to-r from-red-600 to-rose-600 hover:from-red-500 hover:to-rose-500 text-white font-bold py-4 rounded-xl transition-all transform hover:scale-[1.02] shadow-lg shadow-red-500/20"
                                    >
                                        <div className="flex flex-col items-center">
                                            <span className="text-lg">SELL</span>
                                            <span className="text-xs opacity-80 font-mono">{(currentPrice - 0.0002).toFixed(5)}</span>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        {/* Sidebar */}
                        <div className="space-y-6">
                            {/* Order Book */}
                            <div className="glass-panel rounded-xl p-4">
                                <h3 className="text-lg font-semibold text-white mb-4 flex items-center">
                                    <i data-lucide="book-open" className="w-5 h-5 mr-2 text-blue-400"></i>
                                    Order Book
                                </h3>
                                
                                <div className="space-y-1 mb-4">
                                    {[...Array(5)].map((_, i) => {
                                        const price = currentPrice + (0.0001 * (5 - i));
                                        const size = Math.random() * 2 + 0.5;
                                        return (
                                            <div key={`ask-${i}`} className="flex justify-between items-center text-sm order-book-row rounded p-1">
                                                <span className="text-red-400 font-mono">{price.toFixed(5)}</span>
                                                <div className="flex-1 mx-2 h-2 bg-red-500/20 rounded-full overflow-hidden">
                                                    <div className="h-full bg-red-500/40" style={{width: `${size * 20}%`}}></div>
                                                </div>
                                                <span className="text-gray-400 font-mono text-xs">{size.toFixed(2)}M</span>
                                            </div>
                                        );
                                    })}
                                </div>
                                
                                <div className="text-center py-2 border-y border-blue-500/20">
                                    <span className="text-2xl font-bold font-mono text-white">{currentPrice.toFixed(5)}</span>
                                    <span className="text-xs text-green-400 ml-2">▲ 0.02%</span>
                                </div>
                                
                                <div className="space-y-1 mt-4">
                                    {[...Array(5)].map((_, i) => {
                                        const price = currentPrice - (0.0001 * (i + 1));
                                        const size = Math.random() * 2 + 0.5;
                                        return (
                                            <div key={`bid-${i}`} className="flex justify-between items-center text-sm order-book-row rounded p-1">
                                                <span className="text-green-400 font-mono">{price.toFixed(5)}</span>
                                                <div className="flex-1 mx-2 h-2 bg-green-500/20 rounded-full overflow-hidden">
                                                    <div className="h-full bg-green-500/40" style={{width: `${size * 20}%`}}></div>
                                                </div>
                                                <span className="text-gray-400 font-mono text-xs">{size.toFixed(2)}M</span>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                            
                            {/* Recent Trades */}
                            <div className="glass-panel rounded-xl p-4">
                                <h3 className="text-lg font-semibold text-white mb-4">Recent Trades</h3>
                                <div className="space-y-2 max-h-48 overflow-y-auto scrollbar-hide">
                                    {[...Array(10)].map((_, i) => (
                                        <div key={i} className="flex justify-between text-xs">
                                            <span className="text-gray-500">{new Date(Date.now() - i * 60000).toLocaleTimeString()}</span>
                                            <span className={Math.random() > 0.5 ? 'text-green-400' : 'text-red-400'}>
                                                {Math.random() > 0.5 ? 'Buy' : 'Sell'}
                                            </span>
                                            <span className="text-white font-mono">{(currentPrice + (Math.random() - 0.5) * 0.001).toFixed(5)}</span>
                                            <span className="text-gray-400">{(Math.random() * 1000).toFixed(0)}K</span>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {/* Open Positions */}
                    {openPositions.length > 0 && (
                        <div className="glass-panel rounded-xl p-6">
                            <h3 className="text-lg font-semibold text-white mb-4">Open Positions ({openPositions.length})</h3>
                            <div className="overflow-x-auto">
                                <table className="w-full">
                                    <thead>
                                        <tr className="text-left text-gray-400 text-sm border-b border-blue-500/20">
                                            <th className="pb-3">Pair</th>
                                            <th className="pb-3">Side</th>
                                            <th className="pb-3 text-right">Amount</th>
                                            <th className="pb-3 text-right">Entry</th>
                                            <th className="pb-3 text-right">Current</th>
                                            <th className="pb-3 text-right">P&L</th>
                                            <th className="pb-3 text-right">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {openPositions.map((pos, idx) => {
                                            const pnl = (currentPrice - pos.entry) * pos.amount * (pos.side === 'buy' ? 1 : -1);
                                            return (
                                                <tr key={idx} className="border-b border-blue-500/10 last:border-0">
                                                    <td className="py-3 font-medium text-white">{pos.pair}</td>
                                                    <td className="py-3">
                                                        <span className={`px-2 py-1 rounded text-xs font-bold ${pos.side === 'buy' ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'}`}>
                                                            {pos.side.toUpperCase()}
                                                        </span>
                                                    </td>
                                                    <td className="py-3 text-right font-mono">${pos.amount.toLocaleString()}</td>
                                                    <td className="py-3 text-right font-mono text-gray-400">{pos.entry.toFixed(5)}</td>
                                                    <td className="py-3 text-right font-mono text-white">{currentPrice.toFixed(5)}</td>
                                                    <td className={`py-3 text-right font-mono font-bold ${pnl >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                                                        {pnl >= 0 ? '+' : ''}{pnl.toFixed(2)}
                                                    </td>
                                                    <td className="py-3 text-right">
                                                        <button className="text-red-400 hover:text-red-300 text-sm font-medium">Close</button>
                                                    </td>
                                                </tr>
                                            );
                                        })}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    )}
                </div>
            );
        };
        
        // Account View
        const AccountView = ({ accountBalance, openPositions }) => {
            const totalPnl = openPositions.reduce((acc, pos) => acc + pos.pnl, 0);
            const equity = accountBalance + totalPnl;
            
            return (
                <div className="space-y-6 animate-fade-in">
                    <h2 className="text-3xl font-bold text-white">Account Overview</h2>
                    
                    {/* Balance Cards */}
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div className="glass-panel rounded-xl p-6 border-l-4 border-blue-500">
                            <p className="text-gray-400 text-sm mb-1">Balance</p>
                            <p className="text-2xl font-bold text-white font-mono">${accountBalance.toLocaleString()}</p>
                        </div>
                        <div className="glass-panel rounded-xl p-6 border-l-4 border-purple-500">
                            <p className="text-gray-400 text-sm mb-1">Equity</p>
                            <p className="text-2xl font-bold text-white font-mono">${equity.toLocaleString()}</p>
                        </div>
                        <div className="glass-panel rounded-xl p-6 border-l-4 border-green-500">
                            <p className="text-gray-400 text-sm mb-1">Unrealized P&L</p>
                            <p className={`text-2xl font-bold font-mono ${totalPnl >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                                {totalPnl >= 0 ? '+' : ''}${totalPnl.toLocaleString()}
                            </p>
                        </div>
                        <div className="glass-panel rounded-xl p-6 border-l-4 border-yellow-500">
                            <p className="text-gray-400 text-sm mb-1">Free Margin</p>
                            <p className="text-2xl font-bold text-white font-mono">${(accountBalance * 0.8).toLocaleString()}</p>
                        </div>
                    </div>
                    
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        {/* Performance Chart */}
                        <div className="lg:col-span-2 glass-panel rounded-xl p-6">
                            <h3 className="text-lg font-semibold text-white mb-4">Performance History</h3>
                            <div className="h-64 flex items-end justify-between space-x-2">
                                {[...Array(30)].map((_, i) => {
                                    const height = 30 + Math.random() * 70;
                                    const isProfit = height > 50;
                                    return (
                                        <div key={i} className="flex-1 flex flex-col justify-end group cursor-pointer">
                                            <div 
                                                className={`w-full rounded-t transition-all duration-300 group-hover:opacity-80 ${isProfit ? 'bg-green-500/60' : 'bg-red-500/60'}`}
                                                style={{height: `${height}%`}}
                                            ></div>
                                        </div>
                                    );
                                })}
                            </div>
                            <div className="flex justify-between mt-4 text-xs text-gray-500">
                                <span>30 days ago</span>
                                <span>Today</span>
                            </div>
                        </div>
                        
                        {/* Quick Actions */}
                        <div className="space-y-4">
                            <div className="glass-panel rounded-xl p-6">
                                <h3 className="text-lg font-semibold text-white mb-4">Quick Actions</h3>
                                <div className="space-y-3">
                                    <button className="w-full bg-blue-600 hover:bg-blue-500 text-white font-medium py-3 rounded-lg transition-colors flex items-center justify-center space-x-2">
                                        <i data-lucide="plus" className="w-4 h-4"></i>
                                        <span>Deposit Funds</span>
                                    </button>
                                    <button className="w-full bg-blue-950/50 hover:bg-blue-900/50 border border-blue-500/30 text-blue-400 font-medium py-3 rounded-lg transition-colors flex items-center justify-center space-x-2">
                                        <i data-lucide="minus" className="w-4 h-4"></i>
                                        <span>Withdraw</span>
                                    </button>
                                    <button className="w-full bg-blue-950/50 hover:bg-blue-900/50 border border-blue-500/30 text-blue-400 font-medium py-3 rounded-lg transition-colors flex items-center justify-center space-x-2">
                                        <i data-lucide="history" className="w-4 h-4"></i>
                                        <span>Transaction History</span>
                                    </button>
                                </div>
                            </div>
                            
                            <div className="glass-panel rounded-xl p-6">
                                <h3 className="text-lg font-semibold text-white mb-4">Account Stats</h3>
                                <div className="space-y-3 text-sm">
                                    <div className="flex justify-between">
                                        <span className="text-gray-400">Total Trades</span>
                                        <span className="text-white font-mono">1,247</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-gray-400">Win Rate</span>
                                        <span className="text-green-400 font-mono">68.5%</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-gray-400">Avg. Profit</span>
                                        <span className="text-green-400 font-mono">$342.50</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-gray-400">Avg. Loss</span>
                                        <span className="text-red-400 font-mono">$128.30</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {/* Transaction History */}
                    <div className="glass-panel rounded-xl p-6">
                        <h3 className="text-lg font-semibold text-white mb-4">Recent Transactions</h3>
                        <div className="space-y-3">
                            {[
                                { date: '2024-01-15 14:32', type: 'Buy', pair: 'EUR/USD', amount: 5000, price: 1.1234, pnl: 240 },
                                { date: '2024-01-15 13:15', type: 'Sell', pair: 'GBP/USD', amount: 3000, price: 1.3489, pnl: -220 },
                                { date: '2024-01-14 09:45', type: 'Buy', pair: 'USD/JPY', amount: 8000, price: 110.23, pnl: 180 },
                                { date: '2024-01-14 08:20', type: 'Deposit', amount: 10000, status: 'Completed' },
                                { date: '2024-01-13 16:00', type: 'Sell', pair: 'AUD/USD', amount: 2500, price: 0.7623, pnl: 95 },
                            ].map((tx, idx) => (
                                <div key={idx} className="flex items-center justify-between p-4 bg-blue-950/30 rounded-lg hover:bg-blue-900/30 transition-colors">
                                    <div className="flex items-center space-x-4">
                                        <div className={`w-10 h-10 rounded-full flex items-center justify-center ${
                                            tx.type === 'Buy' ? 'bg-green-500/20 text-green-400' : 
                                            tx.type === 'Sell' ? 'bg-red-500/20 text-red-400' : 
                                            'bg-blue-500/20 text-blue-400'
                                        }`}>
                                            <i data-lucide={
                                                tx.type === 'Buy' ? 'arrow-up-right' : 
                                                tx.type === 'Sell' ? 'arrow-down-right' : 
                                                'plus'
                                            } className="w-5 h-5"></i>
                                        </div>
                                        <div>
                                            <p className="font-medium text-white">{tx.type} {tx.pair || 'Funds'}</p>
                                            <p className="text-xs text-gray-500">{tx.date}</p>
                                        </div>
                                    </div>
                                    <div className="text-right">
                                        <p className="font-mono text-white">${tx.amount.toLocaleString()}</p>
                                        {tx.pnl !== undefined && (
                                            <p className={`text-xs ${tx.pnl >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                                                P&L: {tx.pnl >= 0 ? '+' : ''}${tx.pnl}
                                            </p>
                                        )}
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };
        
        // Main App Component
        const ForexArbitrageApp = () => {
            const [activeTab, setActiveTab] = useState('markets');
            const [user, setUser] = useState({ name: 'Alex Trader', balance: 25000.75 });
            
            const [marketData, setMarketData] = useRealTimeData([
                { pair: 'EUR/USD', price: 1.1258, change: 0.12, high: 1.1272, low: 1.1243 },
                { pair: 'GBP/USD', price: 1.3445, change: -0.25, high: 1.3478, low: 1.3421 },
                { pair: 'USD/JPY', price: 110.42, change: 0.34, high: 110.67, low: 110.12 },
                { pair: 'AUD/USD', price: 0.7623, change: 0.18, high: 0.7645, low: 0.7601 },
                { pair: 'USD/CAD', price: 1.2567, change: -0.15, high: 1.2589, low: 1.2543 },
                { pair: 'NZD/USD', price: 0.7123, change: 0.22, high: 0.7145, low: 0.7101 },
                { pair: 'USD/CHF', price: 0.9234, change: -0.08, high: 0.9256, low: 0.9212 },
                { pair: 'EUR/GBP', price: 0.8372, change: 0.15, high: 0.8391, low: 0.8354 },
                { pair: 'XAU/USD', price: 2034.50, change: 0.45, high: 2038.20, low: 2030.80 },
            ]);
            
            const [arbitrageOpportunities, setArbitrageOpportunities] = useRealTimeData([
                { id: 1, pair: 'EUR/USD', brokerA: 'Broker X', brokerB: 'Broker Y', priceA: 1.1254, priceB: 1.1268, spread: 0.0014, percentage: 0.12 },
                { id: 2, pair: 'GBP/USD', brokerA: 'Broker Z', brokerB: 'Broker X', priceA: 1.3456, priceB: 1.3432, spread: 0.0024, percentage: 0.18 },
                { id: 3, pair: 'USD/JPY', brokerA: 'Broker Y', brokerB: 'Broker Z', priceA: 110.45, priceB: 110.38, spread: 0.07, percentage: 0.06 },
                { id: 4, pair: 'AUD/USD', brokerA: 'Broker X', brokerB: 'Broker W', priceA: 0.7621, priceB: 0.7635, spread: 0.0014, percentage: 0.18 },
            ], 3000);
            
            const [openPositions, setOpenPositions] = useState([
                { pair: 'EUR/USD', amount: 10000, entry: 1.1234, current: 1.1258, side: 'buy', pnl: 240 },
                { pair: 'GBP/USD', amount: 5000, entry: 1.3489, current: 1.3445, side: 'sell', pnl: 220 },
            ]);
            
            useEffect(() => {
                lucide.createIcons();
            }, [activeTab, arbitrageOpportunities, openPositions]);
            
            const renderContent = () => {
                switch(activeTab) {
                    case 'markets':
                        return <MarketsView marketData={marketData} />;
                    case 'arbitrage':
                        return <ArbitrageView opportunities={arbitrageOpportunities} setOpportunities={setArbitrageOpportunities} />;
                    case 'trading':
                        return <TradingView 
                            marketData={marketData} 
                            accountBalance={user.balance}
                            openPositions={openPositions}
                            setOpenPositions={setOpenPositions}
                        />;
                    case 'account':
                        return <AccountView accountBalance={user.balance} openPositions={openPositions} />;
                    default:
                        return <MarketsView marketData={marketData} />;
                }
            };
            
            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-950 via-blue-950 to-slate-950">
                    <Header activeTab={activeTab} setActiveTab={setActiveTab} user={user} onLogout={() => setUser(null)} />
                    
                    <main className="container mx-auto px-4 py-8">
                        {renderContent()}
                    </main>
                    
                    <footer className="border-t border-blue-500/20 mt-12 bg-slate-950/50 backdrop-blur-sm">
                        <div className="container mx-auto px-4 py-8">
                            <div className="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                                <div>
                                    <h4 className="text-lg font-bold text-white mb-4">ForexArbitrage Pro</h4>
                                    <p className="text-sm text-gray-400 leading-relaxed">
                                        Next-generation AI-powered trading platform with quantum-speed arbitrage detection.
                                    </p>
                                </div>
                                <div>
                                    <h4 className="font-semibold text-white mb-4">Platform</h4>
                                    <ul className="space-y-2 text-sm text-gray-400">
                                        <li className="hover:text-blue-400 cursor-pointer">Markets</li>
                                        <li className="hover:text-blue-400 cursor-pointer">Arbitrage</li>
                                        <li className="hover:text-blue-400 cursor-pointer">Trading</li>
                                        <li className="hover:text-blue-400 cursor-pointer">API</li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 className="font-semibold text-white mb-4">Support</h4>
                                    <ul className="space-y-2 text-sm text-gray-400">
                                        <li className="hover:text-blue-400 cursor-pointer">Help Center</li>
                                        <li className="hover:text-blue-400 cursor-pointer">Documentation</li>
                                        <li className="hover:text-blue-400 cursor-pointer">Contact</li>
                                        <li className="hover:text-blue-400 cursor-pointer">Status</li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 className="font-semibold text-white mb-4">Legal</h4>
                                    <ul className="space-y-2 text-sm text-gray-400">
                                        <li className="hover:text-blue-400 cursor-pointer">Privacy Policy</li>
                                        <li className="hover:text-blue-400 cursor-pointer">Terms of Service</li>
                                        <li className="hover:text-blue-400 cursor-pointer">Risk Disclosure</li>
                                        <li className="hover:text-blue-400 cursor-pointer">Compliance</li>
                                    </ul>
                                </div>
                            </div>
                            <div className="border-t border-blue-500/20 pt-8 flex flex-col md:flex-row justify-between items-center">
                                <p className="text-sm text-gray-500">© 2024 ForexArbitrage Pro. All rights reserved.</p>
                                <div className="flex space-x-4 mt-4 md:mt-0">
                                    <i data-lucide="twitter" className="w-5 h-5 text-gray-400 hover:text-blue-400 cursor-pointer"></i>
                                    <i data-lucide="github" className="w-5 h-5 text-gray-400 hover:text-blue-400 cursor-pointer"></i>
                                    <i data-lucide="linkedin" className="w-5 h-5 text-gray-400 hover:text-blue-400 cursor-pointer"></i>
                                    <i data-lucide="message-circle" className="w-5 h-5 text-gray-400 hover:text-blue-400 cursor-pointer"></i>
                                </div>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        };
        
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ForexArbitrageApp />);
    </script>
</body>
</html>

